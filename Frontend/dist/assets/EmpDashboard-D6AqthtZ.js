import{r,j as e,V as u,G as n,R as f,B as s,T as a,a9 as L,c as g,d as j,u as S,W as x,N as B,s as R}from"./index-BHisX-em.js";import{_ as T,G as b}from"./react-apexcharts.min-D7UaDv5m.js";import{h as H}from"./moment-G82_0lEo.js";const M=()=>{const[t,p]=r.useState([]),[d,m]=r.useState(""),[l,C]=r.useState(H().format("YYYY")),h=sessionStorage.getItem("emp_id");r.useEffect(()=>{(async()=>{try{const o=await g.get(`${j.apiUrl}/emp_attend/empAttendChart/?empId=${h}&year=${l}`);console.log("Attendance data fetched:",o.data),p(o.data)}catch(o){console.error("Error fetching attendance data:",o)}})()},[l,h]),r.useEffect(()=>{(async()=>{try{const o=await g.get(`${j.apiUrl}/employee/name/${h}`);m(o.data.emp_name)}catch(o){console.error("Error fetching employee name:",o)}})()},[h]);const w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],v={series:t.map(c=>c.count),options:{chart:{type:"pie",height:400},labels:t.map(c=>`${w[c.month-1]}: ${c.count}`),colors:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0","#546E7A","#26a69a","#D10CE8","#F77E53","#DADADA"],tooltip:{y:{formatter:function(c){return c}}}}};return e.jsx(e.Fragment,{children:e.jsxs(u,{children:[e.jsxs(n,{container:!0,spacing:f,children:[e.jsx(n,{item:!0,lg:8,md:12,sm:12,xs:12,children:e.jsxs(s,{textAlign:"center",children:[e.jsx(a,{variant:"h1",gutterBottom:!0,children:d}),e.jsx(a,{variant:"h2",children:"Employee Attendance"})]})}),e.jsx(n,{item:!0,lg:4,md:12,sm:12,xs:12,children:e.jsx(L,{label:"Enter Year",value:l,InputLabelProps:{shrink:!0},onChange:c=>C(c.target.value),fullWidth:!0})})]}),e.jsx(T,{options:v.options,series:v.series,type:"pie",height:400})]})})};function V(t){return b({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(t)}function U(t){return b({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M288 256H96v64h192v-64zm89-151L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm256 304c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-200v96c0 8.84-7.16 16-16 16H80c-8.84 0-16-7.16-16-16v-96c0-8.84 7.16-16 16-16h224c8.84 0 16 7.16 16 16z"},child:[]}]})(t)}function Y(t){return b({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function z(t){return b({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const G=()=>{const t=S(),p=sessionStorage.getItem("emp_id"),[d,m]=r.useState({leads_followed_today:0,total_sales_value_today:0,invoice_count_today:0}),[l,C]=r.useState([]),[h,w]=r.useState(!1),[v,c]=r.useState(0),[o,_]=r.useState(!0),[D,k]=r.useState([]),[E,I]=r.useState(!1);r.useEffect(()=>{(async()=>{try{const i=sessionStorage.getItem("emp_id");if(!i){console.error("Employee ID is not set in session storage."),_(!1);return}const N=await g.get(`${j.apiUrl}/quotation/empDashBoard/${i}`),$=await g.get(`${j.apiUrl}/customer/getCustomerByEmpId/${i}`);m(N.data),C(N.data.leads_names_today?leadsRes.data.leads_names_today.split(","):[]),k(N.data.invoice_details_today?leadsRes.data.invoice_details_today.split(", "):[]),c($.data.length),_(!1)}catch(i){console.error("Data can't be fetched:",i.response?i.response.data:i.message),_(!1)}})()},[p]);const A=()=>{w(!h)},F=()=>{I(!E)};return o?e.jsx(a,{align:"center",children:"Loading..."}):e.jsxs(n,{container:!0,spacing:2,sx:{width:"100%",marginTop:"15px"},children:[e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{className:"cust-card1",children:e.jsxs(s,{sx:{p:2},children:[e.jsx(s,{display:"flex",justifyContent:"center",mb:1,children:e.jsx(x,{sx:{bgcolor:t.palette.info.dark,height:50,width:50},children:e.jsx(V,{size:30,color:"white"})})}),e.jsx(a,{variant:"h5",className:"cust-card-heading",align:"center",children:"Today Sales Value"}),e.jsxs(a,{variant:"h4",className:"cust-value",align:"center",children:["â‚¹",d.total_sales_value_today]})]})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{className:"cust-card2",children:e.jsxs(s,{sx:{p:2},children:[e.jsx(s,{display:"flex",justifyContent:"center",mb:1,children:e.jsx(x,{sx:{bgcolor:t.palette.primary.dark,height:50,width:50},children:e.jsx(Y,{size:30,color:"white"})})}),e.jsx(a,{variant:"h5",className:"cust-card-heading",align:"center",children:"Customers"}),e.jsx(a,{variant:"h4",className:"cust-value",align:"center",children:v})]})})}),e.jsxs(n,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{className:"cust-card3",onClick:A,style:{cursor:"pointer"},children:e.jsxs(s,{sx:{p:2},children:[e.jsx(s,{display:"flex",justifyContent:"center",mb:1,children:e.jsx(x,{sx:{bgcolor:t.palette.success.dark,height:50,width:50},children:e.jsx(z,{size:30,color:"white"})})}),e.jsx(a,{variant:"h5",className:"cust-card-heading",align:"center",children:"Today Follow Leads"}),e.jsx(a,{variant:"h4",className:"cust-value",align:"center",children:d.leads_followed_today})]})}),h&&e.jsxs(s,{sx:{mt:1,p:1,border:`1px solid ${t.palette.divider}`,borderRadius:2,backgroundColor:t.palette.background.paper},children:[e.jsx(a,{variant:"subtitle1",align:"center",color:"primary",mb:1,children:"Today's Followed Leads:"}),l.length>0?l.map((y,i)=>e.jsx(s,{sx:{backgroundColor:t.palette.grey[200],borderRadius:1,padding:"5px",marginBottom:"5px",boxShadow:1,textAlign:"center"},children:e.jsx(a,{variant:"body2",children:`Name: ${y}`})},i)):e.jsx(a,{variant:"body2",align:"center",children:"No leads followed today."})]})]}),e.jsxs(n,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{className:"cust-card4",onClick:F,style:{cursor:"pointer"},children:e.jsxs(s,{sx:{p:2},children:[e.jsx(s,{display:"flex",justifyContent:"center",mb:1,children:e.jsx(x,{sx:{bgcolor:t.palette.warning.dark,height:50,width:50},children:e.jsx(U,{size:30,color:"white"})})}),e.jsx(a,{variant:"h5",className:"cust-card-heading",align:"center",children:"Today Invoices"}),e.jsx(a,{variant:"h4",className:"cust-value",align:"center",children:d.invoice_count_today})]})}),E&&e.jsxs(s,{sx:{mt:1,p:1,border:`1px solid ${t.palette.divider}`,borderRadius:2,backgroundColor:t.palette.background.paper},children:[e.jsx(a,{variant:"subtitle1",align:"center",color:"primary",mb:1,children:"Today's Invoices:"}),D.length>0?D.map((y,i)=>e.jsx(s,{sx:{backgroundColor:t.palette.grey[200],borderRadius:1,padding:"5px",marginBottom:"5px",boxShadow:1,textAlign:"center"},children:e.jsx(a,{variant:"body2",children:y})},i)):e.jsx(a,{variant:"body2",align:"center",children:"No invoices today."})]})]})]})},J=()=>{const t=S(),[p,d]=r.useState([]),m=sessionStorage.getItem("emp_id");return r.useEffect(()=>{g.get(`${j.apiUrl}/leads/leadsCountForEmpDashboard/${m}`).then(l=>{d(l.data)}).catch(l=>{console.log("Leads Data can't be fetched.")})},[m]),e.jsxs(B,{className:"cust-card5",children:[" ",e.jsxs(s,{sx:{p:2},children:[e.jsx(s,{display:"flex",justifyContent:"center",mb:2,children:e.jsx(x,{sx:{bgcolor:t.palette.primary.main,height:60,width:60},children:e.jsx(z,{size:40,color:"white"})})}),e.jsx(a,{variant:"h3",sx:{textAlign:"center"},className:"styled-emp-card-heading",children:"Total Remember Leads"}),e.jsx(a,{variant:"h1",sx:{textAlign:"center"},className:"styled-emp-value",children:p.reminder_date_count})]})]})};R(u)(({theme:t})=>({backgroundColor:t.palette.primary.dark,color:t.palette.primary.light,overflow:"hidden",position:"relative","&:after":{content:'""',position:"absolute",width:210,height:210,background:`linear-gradient(210.04deg, ${t.palette.primary[200]} -50.94%, rgba(144, 202, 249, 0) 83.49%)`,borderRadius:"50%",top:-30,right:-180},"&:before":{content:'""',position:"absolute",width:210,height:210,background:`linear-gradient(140.9deg, ${t.palette.primary[200]} -14.02%, rgba(144, 202, 249, 0) 77.58%)`,borderRadius:"50%",top:-160,right:-130}}));const P=()=>e.jsx(e.Fragment,{children:e.jsxs(n,{container:!0,spacing:f,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(G,{})}),e.jsx(n,{item:!0,container:!0,lg:8,md:12,sm:12,xs:12,spacing:f,children:e.jsx(n,{item:!0,xs:12,children:e.jsx(M,{})})}),e.jsx(n,{item:!0,container:!0,lg:4,md:12,sm:12,xs:12,spacing:f,children:e.jsx(n,{item:!0,xs:12,children:e.jsx(J,{})})})]})});export{P as default};
